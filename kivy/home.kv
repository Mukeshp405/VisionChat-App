# Home
<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#1c1c1c"
    text_color: "white"
    selected_color: "white"
    icon_color: "white"
    ripple_color: "#c5bdd2"
    unfocus_color: "#1c1c1c"

<Home@MDScreen>:
    name: "Home"

    # === CAMERA IMAGE ===
    Image:
        id: camera_feed
        size_hint: 0.9, None
        height: self.width * 4 / 3  # For 4:3 aspect ratio
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        allow_stretch: True
        keep_ratio: True

    # === FLOATING BUTTON BAR ===
    MDBottomSheet:
        size_hint_y: None
        height: "50dp"
        pos_hint: {'center_x': 0.5,'center_y': 0.13}
        md_bg_color: 0, 0, 0, 0
        MDBoxLayout:
            orientation: 'horizontal'
            padding: ('10dp', '0dp', '10dp', '0dp')
            spacing: "10dp"
            size_hint_y: None
            height: "40dp"
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0
                Rectangle:
                    pos: self.pos
                    size: self.size
            MDIconButton:
                icon: 'view-gallery-outline'
                md_bg_color: "orange"
                icon_size: "20sp"
                size_hint: None, None
                size: "36dp", "36dp"
                on_release: 
                    root.manager.current = "Gallery"
                    root.manager.transition.direction = "left"
            Widget:
            MDIconButton:
                icon: 'close'
                md_bg_color: "orange"
                icon_size: "20sp"
                size_hint: None, None
                size: "36dp", "36dp"
                on_release: app.root.get_screen("Home").cancel_all_feature()

    # === ANOTHER BOTTOM BAR ===
    MDBottomSheet:
        size_hint_y: None
        height: "70dp"
        pos_hint: {'center_x': 0.5,'center_y': 0.04}
        md_bg_color: "black"
        MDScrollView:
            bar_width: 0
            scroll_type: ['bars', 'content']
            do_scroll_x: True
            do_scroll_y: False

            MDGridLayout:
                rows: 1
                size_hint_x: None
                width: self.minimum_width
                height: "60dp"
                spacing: '15dp'
                padding: ('10dp', '0dp', '10dp', '0dp')

                MDIconButton:
                    icon: 'circle-outline'        
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").capture_image()  

                MDIconButton:
                    id: face_button
                    icon: 'face-man'        
                    md_bg_color: "orange"
                    on_release: 
                        app.root.get_screen("Home").toggle_facemesh()

                MDIconButton:
                    icon: 'face-recognition'        
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_facedetection()

                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_manfilter()
                    Image:
                        source: "assets/images/p8.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_dogfilter()             
                    Image:
                        source: "assets/images/p7.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                MDIconButton:
                    icon: 'slash-forward-box'
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_background_change()   
                    Image:
                        source: "assets/FiltersImages/bg3.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y

                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday1_fg()       
                    Image:
                        source: "assets/FiltersImages/hb1.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday2_fg()   
                    Image:
                        source: "assets/FiltersImages/hb2.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y    
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday3_fg()  
                    Image:
                        source: "assets/FiltersImages/hb3.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y     
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday4_fg()  
                    Image:
                        source: "assets/FiltersImages/hb4.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y     
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday5_fg()  
                    Image:
                        source: "assets/FiltersImages/hb5.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y     
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_birthday6_fg()
                    Image:
                        source: "assets/FiltersImages/hb6.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y      

                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter1()
                    Image:
                        source: "assets/FiltersImages/Images/6.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter2()
                    Image:
                        source: "assets/FiltersImages/Images/1.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter3()
                    Image:
                        source: "assets/FiltersImages/Images/8.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter4()
                    Image:
                        source: "assets/FiltersImages/Images/3.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter5()
                    Image:
                        source: "assets/FiltersImages/Images/13.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter6()
                    Image:
                        source: "assets/FiltersImages/Images/sun.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter7()
                    Image:
                        source: "assets/FiltersImages/Images/pirate.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter8()
                    Image:
                        source: "assets/FiltersImages/Images/beard.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       
                MDIconButton:
                    md_bg_color: "orange"
                    on_release: app.root.get_screen("Home").toggle_filter9()
                    Image:
                        source: "assets/FiltersImages/Images/2.png"
                        size_hint: None, None
                        size: "24dp", "24dp"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y       

    # === NAVIGATION LAYOUT ===
    MDNavigationLayout:
        MDScreenManager:
            MDScreen:
                MDTopAppBar:
                    id: top_app_bar
                    elevation: 4
                    pos_hint: {'top': 1}
                    md_bg_color: (255, 0, 0, 0)
                    left_action_items: [["account-circle", lambda x: nav_drawer.set_state("open")]]

                # === Search ===
                MDIconButton:
                    icon: 'magnify'
                    icon_size: 20
                    md_bg_color: "white"
                    pos_hint: {'center_x': 0.68,'center_y': 0.95}
                    size_hint: (0.10, 0.04)
                    on_release: 
                        root.manager.current = "Search"
                        root.manager.transition.direction = "up"

                # === Dots ===
                MDIconButton:
                    icon: 'dots-horizontal'
                    icon_size: 50
                    md_bg_color: "white"
                    pos_hint: {'center_x': 0.79,'center_y': 0.95}
                    size_hint: (0.10, 0.04)
                    on_release: 
                        root.manager.current = "Features"
                        root.manager.transition.direction = "up"

                # === ChatBox ===
                MDIconButton:
                    icon: 'message'
                    icon_size: 20
                    md_bg_color: "white"
                    pos_hint: {'center_x': 0.9,'center_y': 0.95}
                    size_hint: (0.10, 0.04)
                    on_release: 
                        root.manager.current = "ChatBox"
                        root.manager.transition.direction = "left"

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            size_hint_x: 0.35
            md_bg_color: "#1c1c1c"
            MDNavigationDrawerMenu:
                MDNavigationDrawerHeader:
                    id: home_userimage
                    source: "."
                MDNavigationDrawerHeader:
                    id: home_usernf
                    title: "."
                    title_color: "orange"
                    title_font_size: '25dp'
                    text: "."
                    text_color: "white"
                    text_font_size: '12dp'
                    padding: 0, '12dp', 0, 0

                MDNavigationDrawerDivider:
                    color: "gray"
                    padding: ('0dp', '18dp', '0dp', '10dp')

                DrawerClickableItem:
                    id: account_circle_outline_home
                    icon: 'account-circle-outline'
                    text: 'My Profile'
                    theme_icon_color: 'Custom'
                    theme_text_color: 'Custom'
                    icon_color: "white"
                    text_color: "white"
                    md_bg_color: [0,0,0,1]
                    on_release: 
                        root.manager.current = 'Account'
                        root.manager.transition.direction = "left"

                DrawerClickableItem:
                    id: cog_outline_home
                    icon: 'cog-outline'
                    text: 'Settings'
                    theme_icon_color: 'Custom'
                    theme_text_color: 'Custom'
                    icon_color: "white"
                    text_color: "white"
                    on_release: 
                        root.manager.current = 'Setting'
                        root.manager.transition.direction = "left"

                MDNavigationDrawerDivider:
                    color: "gray"
                    padding: ('0dp', '10dp', '0dp', '10dp')

                DrawerClickableItem:
                    id: help_circle_outline_home
                    icon: 'help-circle-outline'
                    text: 'Help'
                    theme_icon_color: 'Custom'
                    theme_text_color: 'Custom'
                    icon_color: "white"
                    text_color: "white"
                    on_release: 
                        root.manager.current = "Help"
                        root.manager.transition.direction = "left"

                DrawerClickableItem:
                    id: information_outline_home
                    icon: 'information-outline'
                    text: 'About'        
                    theme_icon_color: 'Custom'
                    theme_text_color: 'Custom'
                    icon_color: "white"
                    text_color: "white"      
                    on_release: 
                        root.manager.current = "About"
                        root.manager.transition.direction = "left"
